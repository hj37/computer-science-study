---
tags:
  - DB
---
## ë ˆë””ìŠ¤ë€? (Redis)
Remote dictionary server. ì™¸ë¶€ì— ì‚¬ì „ í˜•íƒœ(key-value êµ¬ì¡°)ë¡œ ì €ì¥í•˜ëŠ” ì„œë²„ì´ë‹¤.

> [!NOTE]
> ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ëŠ” Key-Value ê¸°ë°˜ì˜ NoSQL DBMS

- Remote dictionary server
- Database, Cache, Message broker
- In-memory Data Structure Store
- Supports rich data structure

## Cache
í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ í´ë¼ -> ì„œë²„ -> ë°ì´í„°ë² ì´ìŠ¤ì— 3 Tier ì•„í‚¤í…ì²˜ êµ¬ì¡°ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ”ë°, ì‘ì€ ì„œë¹„ìŠ¤ë¼ë©´ í¬ê²Œ ë¬¸ì œê°€ ì—†ì§€ë§Œ ì„œë¹„ìŠ¤ê°€ ì»¤ì§€ê²Œ ëœë‹¤ë©´ í´ë¼ì´ì–¸íŠ¸ë„ ë§ì•„ì§€ê³  ìš”ì²­ë„ ë§ì•„ì§„ë‹¤. ì´ëŸ¬ë©´ DBì— ëŒ€í•œ ë¶€í•˜ë„ ì¦ê°€í•˜ëŠ”ë°, DBì— ëŒ€í•œ ë¶€í•˜ë¥¼ ì¤„ì´ê¸° ìœ„í•´ **ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì— ìºì‹œë¥¼ ë„ì…í•œë‹¤ë©´ ì„±ëŠ¥ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.**
[[ìºì‹œ]]ë€ ë°ì´í„°ë‚˜ ê³„ì‚° ê²°ê³¼ë¥¼ ë¯¸ë¦¬ ì €ì¥í•˜ì—¬ ë¹ ë¥¸ ì•¡ì„¸ìŠ¤ì™€ ë†’ì€ ì„±ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•œ ì €ì¥ì†Œì´ë‹¤.
### ì–´ë””ì— ì €ì¥í•´ì•¼ì§€ ê°€ì¥ ë¹ ë¥¼ê¹Œ?

> **ì €ì¥ ì¥ì¹˜ ê³„ì¸µ êµ¬ì¡°**
![ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°](https://velog.velcdn.com/images%2Falicesykim95%2Fpost%2F97706160-03d5-4877-8d6d-abceec9d91a8%2F%E1%84%8C%E1%85%A1%E1%84%87%E1%85%A1_%E1%84%89%E1%85%A5%E1%86%AF%E1%84%86%E1%85%A7%E1%86%BC17.jpg)

ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì»´í“¨í„°ê°€ êº¼ì§€ë”ë¼ë„ ë°ì´í„°ë¥¼ ë³´ê´€í•´ì•¼í•˜ê¸°ì— ë³´ì¡° ê¸°ì–µ ì¥ì¹˜ì— ì €ì¥í•˜ëŠ”ë°, ê¸°ìˆ ì´ ë°œë‹¬í•¨ìœ¼ë¡œì¨ ë©”ì¸ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ ì¢€ ë” ë¹ ë¥´ê³  ì‰½ê²Œ ë°ì´í„°ì— ì ‘ê·¼í•˜ë©´ ì–´ë–¨ê¹Œì˜ ê°œë…ìœ¼ë¡œ íƒ„ìƒí•œê²Œ ë ˆë””ìŠ¤ì´ë‹¤.

> [!NOTE]
> ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ë³´ë‹¤ ë” ë¹ ë¥¸ Memoryì— ì €ì¥í•˜ì (In-memory Database)

### ìºì‹œì™€ ì–´ë–¤ ê´€ê³„?
- ë ˆë””ìŠ¤ëŠ” ìºì‹œë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.
- ìºì‹± ì™¸ì—ë„ ì„ì‹œ ì‘ì—… í, ì‹¤ì‹œê°„ ì±„íŒ…, ë©”ì‹œì§€ ë¸Œë¡œì»¤ ë“±ì˜ ìš©ë„ë¡œë„ í™œìš©ëœë‹¤.

## ë ˆë””ìŠ¤ íŠ¹ì§•
- Performance (ì„±ëŠ¥)
	- ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´ ë¹ ë¥¸ ì†ë„ë¡œ ì ‘ê·¼ ê°€ëŠ¥
- Data Structure
	- ë‹¤ì–‘í•œ ìë£Œêµ¬ì¡°ë¥¼ ì œê³µí•˜ì—¬ ê°œë°œ í¸ì˜ì„± ì¦ê°€
- Single Thread
	- í•œë²ˆì— í•˜ë‚˜ì˜ ëª…ë ¹ë§Œì„ ì²˜ë¦¬í•˜ì—¬ Race Conditionì´ ê±°ì˜ ë°œìƒí•˜ì§€ ì•ŠìŒ
	- Race Conditionì´ë€ ë‘ ê°œ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì ìœ¼ë¡œ í•˜ë‚˜ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ë ¤ê³  ì„œë¡œ ê²½ìŸí•˜ëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.
- Persistence (ì˜ì†í™”)
	- ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë””ìŠ¤í¬ì— ì˜ì†í™”í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ
	- ì„œë²„ì— ì¹˜ëª…ì ì¸ ë¬¸ì œê°€ ë°œìƒí•˜ë”ë¼ë„ ë³µêµ¬ ê°€ëŠ¥
	- RDB, AOFê°€ ìˆìŒ
## ì–´ë””ì„œ ì“°ì§€?
**ì—¬ëŸ¬ ì„œë²„ì—ì„œ ì„¸ì…˜ ê°™ì€ ë°ì´í„°ë¥¼ ê³µìœ í•  ë•Œ ë§ì´ ì”€**
Goì—ì„œ ì œê³µí•˜ëŠ” Mapìœ¼ë¡œ ì„¸ì…˜ì„ ê´€ë¦¬í•  ê²½ìš°, ì„œë²„ê°€ ì—¬ëŸ¬ëŒ€ì¸ ê²½ìš° ì„œë²„ë§ˆë‹¤ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆì–´ì„œ Consistency ë¬¸ì œ ë°œìƒ

## ì£¼ì˜í•´ì•¼ í•  ì 
- Single Thread ì„œë²„ì´ë¯€ë¡œ ì‹œê°„ ë³µì¡ë„ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.
	- ì‹±ê¸€ ìŠ¤ë ˆë“œì´ë¯€ë¡œ ë¹ ë¥¸ ì²˜ë¦¬ê°€ í•„ìš”í•œë°(ì•„ë‹ˆë©´ ë‹¤ë¥¸ ìš”ì²­ì´ ëŒ€ê¸°í•˜ë‹ˆê¹), ëª¨ë“  í‚¤ë¥¼ ì¡°íšŒí•˜ëŠ” O(N) ì²˜ë¦¬ëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•´ì•¼ í•œë‹¤.
- In-memory íŠ¹ì„±ìƒ ë©”ëª¨ë¦¬ íŒŒí¸í™”, ê°€ìƒ ë©”ëª¨ë¦¬ë“±ì˜ ì´í•´ê°€ í•„ìš”í•˜ë‹¤
### ë©”ëª¨ë¦¬ íŒŒí¸í™”
ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ë°›ê³  í•´ì œí•˜ëŠ” ê³¼ì •ì—ì„œ ë¶€ë¶„ ë¶€ë¶„ ë¹„ì–´ìˆëŠ” ê³µê°„ì´ ìƒê¸°ê²Œ ëœë‹¤. ì´ë¡œ ì¸í•´ ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ë§ì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ì»´í“¨í„°ê°€ ì¸ì‹í•˜ê³ , ì´ ê³¼ì •ì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ì£½ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
ë©”ëª¨ë¦¬ íŒŒí¸í™” ë•Œë¬¸ì— ë ˆë””ìŠ¤ ì‚¬ìš© ì‹œ ë©”ëª¨ë¦¬ë¥¼ ì ë‹¹íˆ ì—¬ìœ ìˆê²Œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

## Repilcation - Fork
ë ˆë””ìŠ¤ëŠ” íœ˜ë°œì„± ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê¸°ì— ìœ ì‹¤ë  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ë°ì´í„° ë³µì‚¬ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°, ë°ì´í„°ë¥¼ ë³µì‚¬í•´ì„œ ìŠ¬ë ˆì´ë¸Œì— ë ˆë””ìŠ¤ ì„œë²„ë‚˜ ë””ìŠ¤í¬ì— ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí•œë‹¤.
ì´ ê³¼ì •ì—ì„œ ë³µì‚¬ê°€ ì¼ì–´ë‚  ë•Œ Forkë¼ê³  í”„ë¡œì„¸ìŠ¤ë¥¼ ë™ì¼í•˜ê²Œ ë³µì œí•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì“°ëŠ”ë°, ì´ ê³¼ì •ì—ì„œ ë©”ëª¨ë¦¬ê°€ ê°€ë“ ì°¨ìˆë‹¤ë©´ ë³µì‚¬ë³¸ì´ ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•Šê³  ì„œë²„ê°€ ì£½ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
ë”°ë¼ì„œ, Fork ì—°ì‚°ì„ ì‚¬ìš©í•  ë•Œë„ ì£¼ì˜í•´ì•¼ í•œë‹¤.

## ë ˆë””ìŠ¤ ìºì‹œ í…ŒìŠ¤íŠ¸
- https://jsonplaceholder.typicode.com/photos APIë¥¼ ë ˆë””ìŠ¤ì— ìºì‹±í•˜ì—¬ ì‘ë‹µì‹œê°„ ë¹„êµ
- ìºì‹±ëœ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ìºì‹œ ë°˜í™˜
- ì—†ë‹¤ë©´ API í˜¸ì¶œ í›„ ìºì‹±
- ì €ì¥ì†Œ: https://github.com/suhyeoonn/redis-go
### Cache Miss
=> 893ms ì†Œìš”
![[Pasted image 20240114162249.png]]

### Cache Hit
=> 93ms ì†Œìš”
![[Pasted image 20240114162550.png]]
## ì¶œì²˜
- [10ë¶„ í…Œì½”í†¡ - ğŸ¤”ë””ë””ì˜ Redis](https://youtu.be/Gimv7hroM8A?si=5LBNsGxBxEcv6D6O)
- [10ë¶„ í…Œì½”í†¡ - ì €ë¬¸, ë¼ì˜¨ì˜ Cache & Redis](https://youtu.be/tVZ15cCRAyE?si=ZU6R7KrN6UJg5CzP)
- [Redis Crash Course](https://youtu.be/jgpVdJB2sKQ?si=EFbSN1BdJ8kvNVR5)
